{% load static %}


<script type="text/x-template" id="{{ id }}">
{% verbatim %}
    <div v-cloak v-if="user" class="bg-lighter p-4">
        <h4 class="text-secondary mb-4">My profile</h4>
        <div class="row">
            <div class="col-12 col-md-4 form-group">
                <label>Username</label>
                <input :value="user.username" type="text" class="form-control" disabled>
            </div>
            <div class="col-12 col-md-4 form-group">
                <label>Email <small class="text-danger">*</small></label>
                <input v-model="user.email" @input="update(user)" type="email" class="form-control">
            </div>
            <div class="col-12 col-md-4 form-group">
                <label>Gender <small class="text-danger">*</small></label>
                <select v-model="user.profile.gender" @change="update(user)" class="form-control">
                    <option value="null">I'd rather not say</option>
                    <option value="F">Female</option>
                    <option value="M">Male</option>
                </select>
            </div>
        </div>
        <hr class="my-4">
        <div class="row">
            <div class="col-12 col-md-6">
                <div class="form-group">
                    <label>First name <small class="text-danger">*</small></label>
                    <input v-model="user.first_name" @input="update(user)" type="text" class="form-control">
                </div>
                <div class="form-group">
                    <label>Last name <small class="text-danger">*</small></label>
                    <input v-model="user.last_name" @input="update(user)" type="text" class="form-control">
                </div>
                <div class="form-group">
                    <label>Affiliation <small class="text-danger">*</small></label>
                    <input v-model="user.profile.affiliation" @input="update(user)" type="text" class="form-control">
                </div>
                <div class="form-group">
                    <label>Country <small class="text-danger">*</small></label>
                    <select v-model="user.profile.country.code" @change="update(user)" class="form-control" data-country>
                        <option v-for="(name, code) in countries" :value="code">{{ name }}</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Dietary requirements <small class="text-danger">*</small></label>
                    <select v-model="user.profile.dietary" @change="update(user)" class="form-control">
                        {% endverbatim %}
                        {% for choice in dietary_choices %}
                            <option value="{{ choice.0 }}">{{ choice.1 }}</option>
                        {% endfor %}
                        {% verbatim %}
                    </select>
                    <small class="form-text text-muted">This information will only be used to provide you with the right dietary options.</small>
                </div>
            </div>
            <div v-if="conference" class="col-12 col-md-6">
                <small class="d-block text-secondary mb-2">
                    <i class="material-icons mr-1">&#xE0BA;</i>Badge <strong v-if="hasCase" class="ml-2 text-danger mb-2"><i class="material-icons">&#xE645;</i>Please use Title Case for your name and affiliation</strong></small>
                <div class="rounded border-semi badge">
                    <table class="standard">
                        <tr>
                            <td>
                                <div class="top band" :style="{background: conference.badge.color}">
                                    <span>{{ conference.name }}</span>
                                </div>
                                <h2 class="name">{{ user.first_name }} {{ user.last_name }}</h2>
                                <h6 class="affiliation">{{ user.profile.affiliation }}, {{ countryName }}</h6>
                                <div class="bottom band" :style="{background: conference.badge.color}">
                                    <span>{{ conference.date_range }}, {{ conference.city }}, <span class="nowrap">{{ conference.country.name }}</span></span>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
{% endverbatim %}
</script>
